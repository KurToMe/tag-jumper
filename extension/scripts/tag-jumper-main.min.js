var DomParser,ElementArticulator,tjump,__bind=function(e,t){return function(){return e.apply(t,arguments)}};tjump={},tjump.overlay=document.createElement("div"),tjump.overlay.id="main-overlay",tjump.overlay.className+="overlay",tjump.canvas=document.createElement("canvas"),tjump.canvas.id="main-canvas",tjump.canvas.className+="canvas",tjump.overlay.appendChild(tjump.canvas),tjump.ctx=tjump.canvas.getContext("2d"),document.body.appendChild(tjump.overlay),tjump.SCALE=32,tjump.FRAME_RATE=1/60,tjump.VELOCITY_ITERATIONS=10,tjump.POSITION_ITERATIONS=10,tjump.GRAVITY=new Box2D.Common.Math.b2Vec2(0,0),tjump.getWidth=function(){return tjump.canvas.offsetWidth},tjump.getHeight=function(){return tjump.canvas.offsetHeight},tjump.scaleToPhys=function(e){return e/tjump.SCALE},tjump.scaleVecToPhys=function(e){return e.Multiply(1/tjump.SCALE),e},tjump.scaleToScreen=function(e){return e*tjump.SCALE},tjump.applyXForce=function(e,t){var n,r,i;return n=Box2D.Common.Math.b2Vec2,r=e.GetPosition(),i=new n(t,0),e.ApplyForce(i,r)},tjump.applyYForce=function(e,t){var n,r,i;return n=Box2D.Common.Math.b2Vec2,r=e.GetPosition(),i=new n(0,t),e.ApplyForce(i,r)},tjump.isBodyInContact=function(e,t){var n,r;return n=e.GetFixtureA().GetBody(),r=e.GetFixtureB().GetBody(),n===t||r===t?!0:!1},ElementArticulator=function(){function e(){this.isValid=__bind(this.isValid,this),this.articulateElement=__bind(this.articulateElement,this)}return e.prototype.articulateElement=function(e){var t;return this.isValid(e)?(t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth},tjump.createPlatform(t),!0):!1},e.prototype.isValid=function(e){return e.offsetWidth?e.offsetWidth>tjump.canvas.offsetWidth/3?!1:e.offsetHeight>tjump.canvas.offsetHeight/3?!1:e.offsetWidth<5?!1:e.offsetHeight<5?!1:!0:!1},e}(),DomParser=function(){function e(e){this.articulator=e,this.parseElement=__bind(this.parseElement,this),this.parsePage=__bind(this.parsePage,this)}return e.prototype.parsePage=function(){return this.parseElement(document.body)},e.prototype.parseElement=function(e){var t,n,r,i,s,o;n=this.articulator.articulateElement(e);if(n)return;s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)t=s[r],o.push(this.parseElement(t));return o},e}(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)}}(),tjump.createPlatform=function(e){var t,n,r,i,s,o,u,a,f;return n=Box2D.Dynamics.b2BodyDef,t=Box2D.Dynamics.b2Body,r=Box2D.Dynamics.b2FixtureDef,i=Box2D.Collision.Shapes.b2PolygonShape,o=new r,o.density=1,o.friction=1,o.restitution=1,s=new n,s.type=t.b2_staticBody,o.shape=new i,s.position.x=tjump.scaleToPhys(e.left-tjump.getWidth()/2),s.position.y=tjump.scaleToPhys(-1*(e.top-tjump.getHeight()/2)),f=tjump.scaleToPhys(e.width),u=tjump.scaleToPhys(5),o.shape.SetAsBox(f,u),a=tjump.world.CreateBody(s),a.CreateFixture(o)},tjump.beginContact=function(e){return tjump.paddleAi.beginContact(e)},tjump.init=function(){var e,t,n,r;return t=Box2D.Dynamics.b2DebugDraw,e=!0,tjump.world=new Box2D.Dynamics.b2World(tjump.GRAVITY,e),tjump.elementArticulator=new ElementArticulator,tjump.domParser=new DomParser(tjump.elementArticulator),tjump.domParser.parsePage(),r=new Box2D.Dynamics.b2ContactListener,r.BeginContact=tjump.beginContact,tjump.world.SetContactListener(r),n=new t,n.SetSprite(tjump.ctx),n.SetDrawScale(tjump.SCALE),n.SetFillAlpha(.4),n.SetLineThickness(1),n.SetFlags(t.e_shapeBit|t.e_jointBit),tjump.world.SetDebugDraw(n)},tjump.update=function(){return tjump.world.Step(tjump.FRAME_RATE,tjump.VELOCITY_ITERATIONS,tjump.POSITION_ITERATIONS),tjump.world.DrawDebugData(),tjump.world.ClearForces(),requestAnimFrame(tjump.update)},tjump.init(),requestAnimFrame(tjump.update)